"""
FORGE MEMORY SYSTEM - CONSTANTS
Per FORGE_PSEUDOCODE_PHASE1.txt
"""

# Magic numbers
MAGIC_RECORD = 0x464F5247  # "FORG" - record file
MAGIC_STRING_DICT = 0x53545244  # "STRD" - string dictionary
MAGIC_WAL = 0x57414C00  # "WAL\0" - write-ahead log
MAGIC_METADATA = 0x4D455441  # "META" - metadata

# Schema versions
RECORD_SCHEMA_VERSION = 0x0002  # v2: grid dimensions upgraded to uint16 for native resolution
STRING_DICT_VERSION = 0x0001

# Size limits
MAX_RECORD_SIZE = 65535  # uint16 max (RECORD_LENGTH field)
MAX_STRING_LENGTH = 65535  # uint16 max
MAX_TRAIN_PAIRS = 255  # uint8 max

# File sizes
INITIAL_RECORDS_SIZE = 1 * 1024 * 1024 * 1024  # 1 GB
INITIAL_WAL_SIZE = 100 * 1024 * 1024  # 100 MB
INITIAL_STRING_DICT_SIZE = 10 * 1024 * 1024  # 10 MB

# Queue configuration
WORKER_COUNT = 8
QUEUE_SIZE_PER_WORKER = 5000
PULSE_INTERVAL_MS = 100  # 100ms = 10 Hz

# V-Cache configuration
VCACHE_SIZE = 64 * 1024 * 1024  # 64 MB
VCACHE_MAX_ENTRIES = 10000

# WAL configuration
MAGIC_WAL = 0x57414C00  # "WAL\0"
WAL_VERSION = 0x0001
WAL_HEADER_SIZE = 20  # bytes
WAL_CHECKPOINT_THRESHOLD_PULSES = 1000
WAL_CHECKPOINT_THRESHOLD_BYTES = 100 * 1024 * 1024  # 100 MB
